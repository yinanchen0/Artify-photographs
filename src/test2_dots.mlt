%% differnt size of bubbles
clc; clear; close all;

% Read the original image
img = imread('peter.png'); % Replace with your image file
[rows, cols, channels] = size(img);

% Define the range for random circle sizes
minRadius = 2;  % Minimum radius size
maxRadius = 10;  % Maximum radius size

% Create an output image filled with black (same size as original)
outputImg = zeros(size(img), 'uint8');

% Generate a grid of points covering the image
rowStep = maxRadius-5; % Step size based on max radius to ensure coverage
colStep = maxRadius-5;
[Xgrid, Ygrid] = meshgrid(1:colStep:cols, 1:rowStep:rows);

% Flatten the grid points into a list
circleCenters = [Ygrid(:), Xgrid(:)]; 

% Loop through and place circles
for i = 1:size(circleCenters, 1)
    % Extract the center point
    row = circleCenters(i, 1);
    col = circleCenters(i, 2);

    % Generate a random radius within the given range
    radius = randi([minRadius, maxRadius]);

    % Create a mask for this circle
    [X, Y] = meshgrid(1:cols, 1:rows);
    mask = ((X - col).^2 + (Y - row).^2) <= radius^2;

    % Compute the average color inside this circle
    avgColor = zeros(1, 3);
    for channel = 1:channels
        % Extract pixel values only for this channel
        pixelsInsideCircle = img(:,:,channel);
        pixelsInsideCircle = pixelsInsideCircle(mask); 
        
        % Compute the average color
        avgColor(channel) = mean(pixelsInsideCircle);
    end

    % Fill the circle with the average color
    for channel = 1:channels
        tempChannel = outputImg(:,:,channel);
        tempChannel(mask) = avgColor(channel); % Apply the averaged color
        outputImg(:,:,channel) = tempChannel;
    end
end

% Display the final image with randomized circles filled with average colors
imshow(outputImg);
title('Image Filled with Random-Sized Circles');

% Save the output image (optional)
imwrite(outputImg, 'filled_circles_image_output.jpg');
